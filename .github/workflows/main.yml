name: Build Release Artefacts
on: push
# on: 
#   push:
#     tags:
#       - "v*"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
    
      - name: Make Output Folder
        run: mkdir dist
        
      - name: Install wasm-pack
        run: curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh
        
      - name: See where we're running
        run: ls
        
      - name: Build the wasm files
        run: wasm-pack build --target web
      
      - name: Zip Files
        run: zip rust_module module.json LICENSE index.js pkg/rust_module.js pkg/rust_module_bg.wasm
